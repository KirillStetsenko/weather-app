(function(){var t={3318:function(t,e,i){"use strict";var a=i(5130),r=i(5234),n=i(6768);const o={class:"app"},s={class:"cityList"};function c(t,e,i,a,r,c){const l=(0,n.g2)("corner-git"),m=(0,n.g2)("main-header-block"),p=(0,n.g2)("city-card");return(0,n.uX)(),(0,n.CE)("main",o,[(0,n.bF)(l),(0,n.bF)(m),(0,n.Lk)("div",s,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.store.cities,(t=>((0,n.uX)(),(0,n.Wv)(p,{key:t.id,city:t},null,8,["city"])))),128))])])}i(4114);var l=i(4373);const m=(0,r.nY)("store",{state:()=>({updateInfoId:null,apiKey:"c5bea748c925d652b7e27743ab9b430d",city:"",cities:[]}),actions:{async getData(t){try{const e=await l.A.get(`https://api.openweathermap.org/data/2.5/forecast?q=${t}&units=metric&appid=${this.apiKey}`);return await e.data}catch(e){console.error(e)}},async getCity(){try{const t=await l.A.get(`https://api.openweathermap.org/data/2.5/forecast?q=${this.city}&units=metric&appid=${this.apiKey}`),e=await t.data;e&&this.addCity(e)}catch(t){console.error(t)}this.city=""},addCity(t){const e=this.cities.some((e=>e.city.name===t.city.name));e||(this.cities.push(t),this.toStorage()),this.city=""},async updateInfo(){console.log("Updating weather...");for(let e=0;e<this.cities.length;e++)try{const t=await l.A.get(`https://api.openweathermap.org/data/2.5/forecast?q=${this.cities[e].city.name}&units=metric&appid=${this.apiKey}`),i=t.data;this.cities[e]=i}catch(t){console.log(t)}},toStorage(){localStorage.setItem("cities",JSON.stringify(this.cities))},fromStorage(){this.cities=JSON.parse(localStorage.getItem("cities"))||[]},startUpdateInfo(){null===this.updateInfoId&&(this.updateInfoId=setInterval((()=>{this.updateInfo()}),6e5))},stopUpdateInfo(){null!==this.updateInfoId&&(clearInterval(this.updateInfoId),this.updateInfoId=null)},weatherIcon(t){const e={"clear sky":"clearDay","few clouds":"fewCloudsDay","scattered clouds":"fewCloudsDay","broken clouds":"fewCloudsDay","overcast clouds":"clouds","shower rain":"showerRain","light rain":"rain","moderate rain":"rain","heavy rain":"heavyRain","heavy intensity rain":"heavyRain",thunderstorm:"thunderstorm",snow:"snow",mist:"mist",tornado:"tornado"},a=e[t]||"";return a?i(5994)(`./${a}.png`):""}}});var p=i(4232),d=i.p+"img/min.2aa9226c.png",u=i.p+"img/max.950825dc.png";const h={class:"cityName"},g=["src"],y={class:"desc"},f={class:"tempBlock"},k={class:"minTemp"},v={class:"currentTemp"},C={class:"maxTemp"};function L(t,e,i,a,r,o){const s=(0,n.g2)("detail-card");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("main",{class:(0,p.C4)(["cityCard",o.randomColor()])},[(0,n.Lk)("div",h,(0,p.v_)(o.cityName),1),(0,n.Lk)("img",{class:"icon",src:o.weatherIcon(o.weatherDescription),alt:"icon",width:"90px"},null,8,g),(0,n.Lk)("div",y,(0,p.v_)(o.weatherDescription),1),(0,n.Lk)("div",f,[(0,n.Lk)("div",k,[e[2]||(e[2]=(0,n.Lk)("img",{src:d,alt:"hot",width:"30px",height:"30px"},null,-1)),(0,n.Lk)("div",null,(0,p.v_)(r.minTemp)+"°C",1)]),(0,n.Lk)("div",v,(0,p.v_)(o.currentTemp)+"°C",1),(0,n.Lk)("div",C,[e[3]||(e[3]=(0,n.Lk)("img",{src:u,alt:"cold",width:"30px",height:"30px"},null,-1)),(0,n.Lk)("div",null,(0,p.v_)(r.maxTemp)+"°C",1)])]),(0,n.Lk)("button",{class:"detailsBtn",onClick:e[0]||(e[0]=t=>o.showDetails(i.city))}," More details... "),(0,n.Lk)("button",{class:"removeBtn",onClick:e[1]||(e[1]=t=>o.remove(o.cityId))})],2),r.selectedCity?((0,n.uX)(),(0,n.Wv)(s,{key:0,city:i.city,onCloseDetails:o.closeDetails},null,8,["city","onCloseDetails"])):(0,n.Q3)("",!0)],64)}const w={class:"detailCard"},b={class:"wrapper"},F={class:"card"};function D(t,e,i,a,r,o){const s=(0,n.g2)("detail-card-main-block"),c=(0,n.g2)("days-block"),l=(0,n.g2)("table-info");return(0,n.uX)(),(0,n.CE)("main",w,[(0,n.Lk)("div",b,[(0,n.Lk)("div",F,[(0,n.bF)(s,{cityName:o.cityName,minTemp:r.minTemp,maxTemp:r.maxTemp,tempFormat:r.tempFormat,"onUpdate:tempFormat":e[0]||(e[0]=t=>r.tempFormat=t),timeFormat:r.timeFormat,"onUpdate:timeFormat":e[1]||(e[1]=t=>r.timeFormat=t),onCloseDetails:o.closeDetails,uniqueDays:o.getUniqueDays()},null,8,["cityName","minTemp","maxTemp","tempFormat","timeFormat","onCloseDetails","uniqueDays"]),(0,n.bF)(c,{uniqueDays:o.getUniqueDays(),cityList:i.city.list,filterDay:o.filterDay,onDayFiltered:o.handleDayFiltered},null,8,["uniqueDays","cityList","filterDay","onDayFiltered"]),(0,n.bF)(l,{filteredInfo:r.filteredInfo,tempFormat:r.tempFormat,timeFormat:r.timeFormat,toggleTimeFormat:o.toggleTimeFormat,toggleTempFormat:o.toggleTempFormat},null,8,["filteredInfo","tempFormat","timeFormat","toggleTimeFormat","toggleTempFormat"])])])])}i(7642),i(8004),i(3853),i(5876),i(2475),i(5024),i(1698);var T=i.p+"img/celcius.33fad90e.png",x=i.p+"img/fahrenheit.146f2bbc.png";const I={class:"header"},_={class:"cityName"},M={class:"topBar"},q={class:"tempBlock"},E={class:"min"},N={class:"max"},O={class:"timeToggle"},A={class:"switch"},S=["checked"],B={class:"tempToggle"},U={class:"switch"},X=["checked"];function $(t,e,i,a,r,o){return(0,n.uX)(),(0,n.CE)("header",I,[(0,n.Lk)("div",_,(0,p.v_)(i.cityName),1),(0,n.Lk)("div",M,[(0,n.Lk)("button",{class:"removeBtn",onClick:e[0]||(e[0]=(...t)=>o.closeDetails&&o.closeDetails(...t))}),(0,n.Lk)("div",q,[(0,n.Lk)("div",E,[e[3]||(e[3]=(0,n.Lk)("span",{class:"tempLabel"},"Min Daily Temp:",-1)),e[4]||(e[4]=(0,n.Lk)("img",{class:"minImg",src:d,alt:"min",width:"50px"},null,-1)),(0,n.eW)(" "+(0,p.v_)(o.toggleTempFormat(this.minTemp,this.tempFormat)),1)]),(0,n.Lk)("div",N,[e[5]||(e[5]=(0,n.Lk)("span",{class:"tempLabel"},"Max Daily Temp:",-1)),e[6]||(e[6]=(0,n.Lk)("img",{class:"maxImg",src:u,alt:"max",width:"50px"},null,-1)),(0,n.eW)(" "+(0,p.v_)(o.toggleTempFormat(this.maxTemp,this.tempFormat)),1)])]),(0,n.Lk)("div",O,[e[8]||(e[8]=(0,n.Lk)("span",{class:"timeLabel"},"12h",-1)),(0,n.Lk)("label",A,[(0,n.Lk)("input",{type:"checkbox",checked:i.timeFormat,onChange:e[1]||(e[1]=(...t)=>o.toggleTime&&o.toggleTime(...t))},null,40,S),e[7]||(e[7]=(0,n.Lk)("span",{class:"slider"},null,-1))]),e[9]||(e[9]=(0,n.Lk)("span",{class:"timeLabel"},"24h",-1))]),(0,n.Lk)("div",B,[e[11]||(e[11]=(0,n.Lk)("img",{src:T,alt:"celcius",width:"30px"},null,-1)),(0,n.Lk)("label",U,[(0,n.Lk)("input",{type:"checkbox",checked:i.tempFormat,onChange:e[2]||(e[2]=(...t)=>o.toggleTemp&&o.toggleTemp(...t))},null,40,X),e[10]||(e[10]=(0,n.Lk)("span",{class:"slider"},null,-1))]),e[12]||(e[12]=(0,n.Lk)("img",{src:x,alt:"fahrenheit",width:"30px"},null,-1))])])])}var j={name:"DetailCardHeaderBlock",props:["cityName","minTemp","maxTemp","tempFormat","timeFormat"],emits:["closeDetails"],data(){return{store:m()}},methods:{toggleTempFormat(t,e){return void 0===t||null===t?"N/A":e?(9*t/5+32).toFixed(0)+" °F":t.toFixed(0)+" °C"},toggleTime(t){this.$emit("update:timeFormat",t.target.checked)},toggleTemp(t){this.$emit("update:tempFormat",t.target.checked)},closeDetails(){this.$emit("closeDetails")}}},K=i(1241);const R=(0,K.A)(j,[["render",$],["__scopeId","data-v-5b7d9308"]]);var W=R;const H={class:"daysBlock"},P=["onClick"],G={class:"day"},J={class:"weekday"};function Z(t,e,i,a,r,o){return(0,n.uX)(),(0,n.CE)("div",H,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.uniqueDays,((t,e)=>((0,n.uX)(),(0,n.CE)("button",{class:(0,p.C4)(["btnWeekday","active"]),key:e,onClick:e=>o.handleFilterDay(t)},[(0,n.Lk)("div",G,(0,p.v_)(o.getDay(t)),1),(0,n.Lk)("div",J,(0,p.v_)(o.getWeekday(t)),1)],8,P)))),128))])}var Q={name:"DayBlock",props:{uniqueDays:{type:Array,required:!0},cityList:{type:Array,required:!0}},methods:{getDay(t){return+t.split(" ")[0]},getWeekday(t){return t.split(" ")[1]},handleFilterDay(t){const e=this.getDay(t);this.$emit("dayFiltered",e)},randomColor(){return"bg"+Math.floor(9*Math.random()+1)}}};const V=(0,K.A)(Q,[["render",Z],["__scopeId","data-v-71a515b5"]]);var Y=V;const z={class:"tableInfo"},tt={class:"time"},et={class:"weather"},it=["src"],at={class:"main"},rt={class:"temperature"},nt={class:"pressure"},ot={class:"humidity"};function st(t,e,i,a,r,o){return(0,n.uX)(),(0,n.CE)("main",null,[(0,n.Lk)("table",z,[e[0]||(e[0]=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",{class:"time"},"Time"),(0,n.Lk)("th",{class:"weather"},"Weather"),(0,n.Lk)("th",{class:"main"},"Main"),(0,n.Lk)("th",{class:"temperature"},"Temperature"),(0,n.Lk)("th",{class:"pressure"},"Pressure"),(0,n.Lk)("th",{class:"humidity"},"Humidity")])],-1)),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.filteredInfo,(t=>((0,n.uX)(),(0,n.CE)("tr",{key:t.dt},[(0,n.Lk)("td",tt,(0,p.v_)(i.toggleTimeFormat(1e3*t.dt,i.timeFormat)),1),(0,n.Lk)("td",et,[(0,n.Lk)("img",{class:"icon",src:r.store.weatherIcon(t.weather[0].description),alt:"logo",width:"50px"},null,8,it)]),(0,n.Lk)("td",at,(0,p.v_)(t.weather[0].description),1),(0,n.Lk)("td",rt,(0,p.v_)(i.toggleTempFormat(t.main.temp,i.tempFormat)),1),(0,n.Lk)("td",nt,(0,p.v_)(t.main.pressure),1),(0,n.Lk)("td",ot,(0,p.v_)(t.main.humidity),1)])))),128))])])])}var ct={name:"TableInfo",props:{filteredInfo:{type:Array,required:!0},toggleTimeFormat:{type:Function,required:!0},toggleTempFormat:{type:Function,required:!0},tempFormat:{type:Boolean,required:!0},timeFormat:{type:Boolean,required:!0}},data(){return{store:m()}}};const lt=(0,K.A)(ct,[["render",st],["__scopeId","data-v-7a5546f6"]]);var mt=lt,pt={name:"DetailCard",components:{DetailCardMainBlock:W,DaysBlock:Y,TableInfo:mt},emits:["closeDetails"],props:{city:{type:Object,required:!0}},data(){return{store:m(),filteredInfo:[],timeFormat:!0,tempFormat:!1,minTemp:0,maxTemp:0}},computed:{cityName(){return this.city.city.name}},methods:{toggleTimeFormat(t,e){return Intl.DateTimeFormat(e?"ru-RU":"en-US",{hour:"numeric",minute:"2-digit"}).format(t)},toggleTempFormat(t,e){return void 0===t||null===t?"N/A":e?(9*t/5+32).toFixed(0)+" °F":t.toFixed(0)+" °C"},getUniqueDays(){if(!this.city.list||!this.city.list.length)return[];const t=this.city.list.map((t=>Intl.DateTimeFormat("en-US",{weekday:"long",day:"numeric"}).format(1e3*t.dt)));return[...new Set(t)]},filterDay(t){this.city.list&&(this.filteredInfo=this.city.list.filter((e=>new Date(1e3*e.dt).getDate()===t)),this.getMinMax())},getMinMax(){if(0===this.filteredInfo.length)return this.minTemp=0,void(this.maxTemp=0);const t=this.filteredInfo.map((t=>t.main.temp));this.minTemp=Math.min(...t),this.maxTemp=Math.max(...t)},closeDetails(){this.$emit("closeDetails")},handleDayFiltered(t){this.filterDay(t)}},mounted(){this.filterDay((new Date).getDate())}};const dt=(0,K.A)(pt,[["render",D],["__scopeId","data-v-0722f2af"]]);var ut=dt,ht={name:"CityCard",components:{DetailCard:ut},inheritAttrs:!1,props:{city:{type:Object,required:!0}},data(){return{store:m(),selectedCity:null,minTemp:0,maxTemp:0}},computed:{cityName(){return this.city.city.name},cityId(){return this.city.city.id},country(){return this.city.city.country},currentTemp(){return this.city.list[0].main.temp.toFixed(0)},weatherDescription(){return this.city.list[0].weather[0].description}},methods:{weatherIcon(t){return this.store.weatherIcon(t)},randomColor(){return"bg"+Math.floor(9*Math.random()+1)},remove(t){this.store.cities=this.store.cities.filter((e=>e.city.id!==t)),this.store.toStorage()},showDetails(t){this.selectedCity=t},closeDetails(){this.selectedCity=null},async getTemp(t){try{const e=await l.A.get(`https://api.openweathermap.org/data/2.5/forecast?q=${t}&units=metric&appid=${this.store.apiKey}`),i=e.data,a=new Date,r=i.list.filter((t=>{const e=new Date(1e3*t.dt);return e>=a}));if(0===r.length)throw new Error("No data available from the current time onwards.");const n=r.map((t=>t.main.temp.toFixed(0)));this.minTemp=Math.min(...n),this.maxTemp=Math.max(...n)}catch(e){throw console.error("Error fetching weather data:",e),e}}},mounted(){this.getTemp(this.city.city.name)}};const gt=(0,K.A)(ht,[["render",L]]);var yt=gt;const ft={class:"header"},kt={class:"search"};function vt(t,e,i,r,o,s){return(0,n.uX)(),(0,n.CE)("header",ft,[e[3]||(e[3]=(0,n.Lk)("div",{class:"title"},"My Weather App",-1)),(0,n.Lk)("div",kt,[(0,n.bo)((0,n.Lk)("input",{class:"searchInp",type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>o.store.city=t),onKeydown:e[1]||(e[1]=(0,a.jR)(((...t)=>o.store.getCity&&o.store.getCity(...t)),["enter"])),placeholder:"Enter city..."},null,544),[[a.Jo,o.store.city,void 0,{trim:!0}]]),(0,n.Lk)("button",{class:"searchBtn",onClick:e[2]||(e[2]=(...t)=>o.store.getCity&&o.store.getCity(...t))},"Get")])])}var Ct={name:"MainHeaderBlock",data(){return{store:m()}}};const Lt=(0,K.A)(Ct,[["render",vt],["__scopeId","data-v-87492498"]]);var wt=Lt;const bt={class:"cornerLink"},Ft={href:"https://github.com/KirillStetsenko",class:"github-corner",title:"GitHub",target:"blank"},Dt={width:"80",height:"80",viewBox:"0 0 250 250",style:{fill:"#151513",color:"#fff",position:"absolute",top:"0",border:"0",left:"0",transform:"scale(-1, 1)"}};function Tt(t,e,i,a,r,o){return(0,n.uX)(),(0,n.CE)("div",bt,[(0,n.Lk)("a",Ft,[((0,n.uX)(),(0,n.CE)("svg",Dt,e[0]||(e[0]=[(0,n.Lk)("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"},null,-1),(0,n.Lk)("path",{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor",style:{"transform-origin":"130px 106px"},class:"octo-arm"},null,-1),(0,n.Lk)("path",{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor",class:"octo-body"},null,-1)])))])])}var xt={};const It=(0,K.A)(xt,[["render",Tt]]);var _t=It,Mt={name:"App",components:{CityCard:yt,MainHeaderBlock:wt,CornerGit:_t},data(){return{store:m()}},methods:{randomColor(){return"bg"+Math.floor(9*Math.random()+1)}},mounted(){this.store.fromStorage(),this.store.startUpdateInfo()},beforeUnmount(){this.store.stopUpdateInfo()}};const qt=(0,K.A)(Mt,[["render",c],["__scopeId","data-v-676ece26"]]);var Et=qt;(0,a.Ef)(Et).use((0,r.Ey)()).mount("#app")},5994:function(t,e,i){var a={"./clearDay.png":8778,"./clearNight.png":3862,"./clouds.png":8107,"./default.png":690,"./fewCloudsDay.png":2727,"./fewCloudsNight.png":955,"./heavyRain.png":3322,"./mist.png":3198,"./rain.png":6831,"./showerRain.png":6281,"./snow.png":4552,"./thunderstorm.png":6316,"./tornado.png":3246};function r(t){var e=n(t);return i(e)}function n(t){if(!i.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}r.keys=function(){return Object.keys(a)},r.resolve=n,t.exports=r,r.id=5994},8778:function(t,e,i){"use strict";t.exports=i.p+"img/clearDay.3a2e53ec.png"},3862:function(t,e,i){"use strict";t.exports=i.p+"img/clearNight.a8b883b6.png"},8107:function(t,e,i){"use strict";t.exports=i.p+"img/clouds.0dda67fc.png"},690:function(t,e,i){"use strict";t.exports=i.p+"img/default.61acb162.png"},2727:function(t,e,i){"use strict";t.exports=i.p+"img/fewCloudsDay.911e5ed5.png"},955:function(t,e,i){"use strict";t.exports=i.p+"img/fewCloudsNight.948e3772.png"},3322:function(t,e,i){"use strict";t.exports=i.p+"img/heavyRain.a71a0478.png"},3198:function(t,e,i){"use strict";t.exports=i.p+"img/mist.8382ab6f.png"},6831:function(t,e,i){"use strict";t.exports=i.p+"img/rain.aa89e574.png"},6281:function(t,e,i){"use strict";t.exports=i.p+"img/showerRain.61acb162.png"},4552:function(t,e,i){"use strict";t.exports=i.p+"img/snow.087a5907.png"},6316:function(t,e,i){"use strict";t.exports=i.p+"img/thunderstorm.c5585ceb.png"},3246:function(t,e,i){"use strict";t.exports=i.p+"img/tornado.def5688b.png"}},e={};function i(a){var r=e[a];if(void 0!==r)return r.exports;var n=e[a]={exports:{}};return t[a].call(n.exports,n,n.exports,i),n.exports}i.m=t,function(){var t=[];i.O=function(e,a,r,n){if(!a){var o=1/0;for(m=0;m<t.length;m++){a=t[m][0],r=t[m][1],n=t[m][2];for(var s=!0,c=0;c<a.length;c++)(!1&n||o>=n)&&Object.keys(i.O).every((function(t){return i.O[t](a[c])}))?a.splice(c--,1):(s=!1,n<o&&(o=n));if(s){t.splice(m--,1);var l=r();void 0!==l&&(e=l)}}return e}n=n||0;for(var m=t.length;m>0&&t[m-1][2]>n;m--)t[m]=t[m-1];t[m]=[a,r,n]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var a in e)i.o(e,a)&&!i.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){i.p="/имярепозитория/"}(),function(){var t={524:0};i.O.j=function(e){return 0===t[e]};var e=function(e,a){var r,n,o=a[0],s=a[1],c=a[2],l=0;if(o.some((function(e){return 0!==t[e]}))){for(r in s)i.o(s,r)&&(i.m[r]=s[r]);if(c)var m=c(i)}for(e&&e(a);l<o.length;l++)n=o[l],i.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return i.O(m)},a=self["webpackChunkmy_weather_app"]=self["webpackChunkmy_weather_app"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=i.O(void 0,[504],(function(){return i(3318)}));a=i.O(a)})();
//# sourceMappingURL=app.2f7e2f9f.js.map